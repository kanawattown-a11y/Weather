# 🌤️ نظام الطقس المتقدم - محافظة السويداء

نظام طقس متطور وشامل مصمم خصيصاً لمحافظة السويداء، سوريا. يوفر هذا النظام واجهة مستخدم متقدمة مع خريطة تفاعلية قابلة للتخصيص بالكامل، وأزرار تحكم شاملة، وعرض بيانات الطقس في الوقت الفعلي مع إمكانيات تحليل متقدمة.

## 🚀 الميزات الرئيسية

### 📊 بيانات الطقس الشاملة
- **الطقس الحالي**: درجة الحرارة، الرطوبة، سرعة الرياح، الضغط الجوي، الرؤية، والغيوم
- **التوقعات المتقدمة**: توقعات لمدة 5 أيام بخطوة 3 ساعات
- **البيانات التاريخية**: إمكانية الوصول للبيانات التاريخية (حسب خطة الاشتراك)
- **التحديث التلقائي**: تحديث البيانات كل ساعة

### 🗺️ خريطة تفاعلية متقدمة
- **أنماط خرائط متعددة**: OpenStreetMap، صور الأقمار الصناعية، التضاريس، والوضع المظلم
- **طبقات الطقس**: طبقات منفصلة لدرجة الحرارة، الأمطار، الرياح، الغيوم، والضغط الجوي
- **تحكم كامل في الطبقات**: إمكانية تفعيل/إلغاء أي طبقة بشكل منفصل
- **تكبير وتصغير متقدم**: مع مقياس المسافة والإحداثيات

### 🎮 واجهة تحكم متطورة
- **لوحة تحكم شاملة**: أزرار للتحكم في جميع جوانب النظام
- **حركة زمنية**: تشغيل حركة زمنية لعرض تطور الطقس
- **شريط الوقت**: للتنقل بين الأوقات المختلفة
- **تخصيص العرض**: إمكانية تخصيص كامل لطريقة عرض البيانات

### 🔧 قابلية التخصيص
- **مفتاح API قابل للتغيير**: إدخال مفتاح OpenWeatherMap الخاص بك
- **حفظ الإعدادات**: حفظ تلقائي للإعدادات في المتصفح
- **واجهة عربية**: دعم كامل للغة العربية مع اتجاه RTL
- **تصميم متجاوب**: يعمل على جميع الأجهزة (سطح المكتب، الجوال، التابلت)

## 🛠️ التقنيات المستخدمة

### الواجهة الخلفية (Backend)
- **Flask**: إطار عمل Python خفيف وقوي
- **Flask-CORS**: للسماح بالطلبات من الواجهة الأمامية
- **Requests**: لجلب البيانات من OpenWeatherMap API
- **SQLAlchemy**: لإدارة قاعدة البيانات (اختياري)

### الواجهة الأمامية (Frontend)
- **HTML5**: هيكل الصفحة مع دعم العربية
- **CSS3**: تصميم متقدم مع تأثيرات بصرية
- **JavaScript ES6+**: منطق التطبيق والتفاعل
- **Leaflet.js**: مكتبة الخرائط التفاعلية
- **Chart.js**: للرسوم البيانية (مستقبلياً)
- **Font Awesome**: الأيقونات

### APIs الخارجية
- **OpenWeatherMap API**: مصدر بيانات الطقس الرئيسي
- **OpenWeatherMap Maps**: طبقات الخرائط المتخصصة

## 📋 المتطلبات

### متطلبات النظام
- Python 3.8 أو أحدث
- متصفح ويب حديث يدعم JavaScript ES6+
- اتصال بالإنترنت لجلب البيانات

### المكتبات المطلوبة
```
Flask==3.1.1
Flask-CORS==6.0.0
requests==2.32.4
SQLAlchemy==2.0.36
```

## 🚀 التثبيت والتشغيل

### 1. تحميل المشروع
```bash
git clone https://github.com/your-username/al-suwayda-weather-system.git
cd al-suwayda-weather-system
```

### 2. إنشاء البيئة الافتراضية
```bash
python -m venv venv
source venv/bin/activate  # على Linux/Mac
# أو
venv\Scripts\activate  # على Windows
```

### 3. تثبيت المتطلبات
```bash
pip install -r requirements.txt
```

### 4. تشغيل التطبيق
```bash
cd src
python main.py
```

### 5. فتح التطبيق
افتح متصفح الويب وانتقل إلى: `http://localhost:5000`

## 🔑 إعداد مفتاح API

### الحصول على مفتاح OpenWeatherMap
1. انتقل إلى [OpenWeatherMap](https://openweathermap.org/api)
2. أنشئ حساباً جديداً أو سجل الدخول
3. انتقل إلى قسم "API Keys"
4. انسخ مفتاح API الخاص بك

### إعداد المفتاح في التطبيق
1. افتح ملف `config.py` في المجلد الرئيسي
2. استبدل `'YOUR_API_KEY_HERE'` بمفتاح API الخاص بك:
   ```python
   OPENWEATHER_API_KEY = 'your_actual_api_key_here'
   ```
3. احفظ الملف وأعد تشغيل التطبيق

### استخدام متغيرات البيئة (الطريقة الآمنة)
بدلاً من كتابة المفتاح مباشرة في الكود، يمكنك استخدام متغير بيئة:

**على Linux/Mac:**
```bash
export OPENWEATHER_API_KEY="your_actual_api_key_here"
python src/main.py
```

**على Windows:**
```cmd
set OPENWEATHER_API_KEY=your_actual_api_key_here
python src/main.py
```

## 📖 دليل الاستخدام

### الواجهة الرئيسية
التطبيق يتكون من ثلاثة أجزاء رئيسية:

1. **الرأس (Header)**: يحتوي على عنوان التطبيق وحقل إدخال مفتاح API
2. **لوحة التحكم**: على الجانب الأيمن، تحتوي على جميع أزرار التحكم
3. **الخريطة**: الجزء الرئيسي الذي يعرض الخريطة التفاعلية

### استخدام لوحة التحكم

#### بيانات الطقس
- **تحديث البيانات**: يجلب أحدث بيانات الطقس من OpenWeatherMap
- **عرض التوقعات**: يظهر/يخفي لوحة التوقعات للساعات القادمة

#### طبقات الخريطة
يمكنك تفعيل أو إلغاء أي من الطبقات التالية:
- **طبقة درجة الحرارة**: تظهر توزيع درجات الحرارة على الخريطة
- **طبقة الأمطار**: تظهر مناطق هطول الأمطار
- **طبقة الرياح**: تظهر اتجاه وسرعة الرياح
- **طبقة الغيوم**: تظهر الغطاء السحابي
- **طبقة الضغط الجوي**: تظهر خطوط الضغط الجوي

#### نمط الخريطة
اختر من بين أربعة أنماط مختلفة:
- **OpenStreetMap**: الخريطة الأساسية
- **صور الأقمار الصناعية**: صور فضائية عالية الدقة
- **التضاريس**: تظهر التضاريس والارتفاعات
- **الوضع المظلم**: نمط مظلم مريح للعينين

#### التحكم في الحركة
- **تشغيل الحركة**: يبدأ عرض تطور الطقس عبر الزمن
- **إيقاف مؤقت**: يوقف الحركة الزمنية
- **شريط الوقت**: للتنقل يدوياً بين الأوقات المختلفة

### استخدام الخريطة
- **التكبير/التصغير**: استخدم عجلة الماوس أو أزرار +/-
- **التحريك**: اسحب الخريطة للتحريك
- **النقر على العلامة**: يظهر معلومات الطقس الحالية
- **عرض الطبقات**: فعّل الطبقات المختلفة لرؤية بيانات متنوعة

## 🎨 التخصيص المتقدم

### تخصيص الألوان والتصميم
يمكنك تعديل ملف `styles.css` لتغيير:
- ألوان الواجهة
- خطوط النصوص
- أحجام العناصر
- تأثيرات الحركة

### إضافة طبقات جديدة
لإضافة طبقات طقس جديدة، عدّل في ملف `script.js`:
```javascript
const WEATHER_LAYERS = {
    temperature: 'temp_new',
    precipitation: 'precipitation_new',
    wind: 'wind_new',
    clouds: 'clouds_new',
    pressure: 'pressure_new',
    // أضف طبقات جديدة هنا
    humidity: 'humidity_new'
};
```

### تخصيص الإحداثيات
لتغيير الموقع المستهدف، عدّل في ملف `script.js`:
```javascript
const AL_SUWAYDA_COORDS = [32.709106, 36.341773];
```

وفي ملف `weather.py`:
```python
AL_SUWAYDA_LAT = 32.709106
AL_SUWAYDA_LON = 36.341773
```

## 🔧 التطوير والمساهمة

### هيكل المشروع
```
al_suwayda_weather_system/
├── src/
│   ├── static/
│   │   ├── index.html      # الصفحة الرئيسية
│   │   ├── styles.css      # ملف التصميم
│   │   └── script.js       # منطق JavaScript
│   ├── routes/
│   │   ├── weather.py      # مسارات API للطقس
│   │   └── user.py         # مسارات المستخدمين
│   ├── models/
│   │   └── user.py         # نماذج قاعدة البيانات
│   └── main.py             # نقطة البداية
├── venv/                   # البيئة الافتراضية
├── requirements.txt        # المتطلبات
└── README.md              # هذا الملف
```

### إضافة ميزات جديدة
1. أنشئ فرعاً جديداً: `git checkout -b feature-name`
2. أضف التغييرات المطلوبة
3. اختبر التغييرات محلياً
4. أرسل طلب دمج (Pull Request)

### اختبار التطبيق
```bash
# تشغيل الخادم في وضع التطوير
python src/main.py

# اختبار APIs
curl http://localhost:5000/api/weather/coordinates
```

## 🌐 النشر (Deployment)

### النشر على Heroku
1. أنشئ ملف `Procfile`:
```
web: python src/main.py
```

2. أنشئ ملف `runtime.txt`:
```
python-3.11.0
```

3. ادفع إلى Heroku:
```bash
heroku create your-app-name
git push heroku main
```

### النشر على VPS
1. انسخ الملفات إلى الخادم
2. ثبت المتطلبات
3. استخدم Gunicorn للإنتاج:
```bash
pip install gunicorn
gunicorn -w 4 -b 0.0.0.0:5000 src.main:app
```

## 📊 APIs المتاحة

### `/api/weather/current`
جلب بيانات الطقس الحالية
- **الطريقة**: GET
- **المعاملات**: `api_key` (مطلوب)
- **الاستجابة**: JSON مع بيانات الطقس الحالية

### `/api/weather/forecast`
جلب توقعات الطقس
- **الطريقة**: GET
- **المعاملات**: `api_key` (مطلوب)
- **الاستجابة**: JSON مع توقعات 5 أيام

### `/api/weather/coordinates`
الحصول على إحداثيات السويداء
- **الطريقة**: GET
- **المعاملات**: لا يوجد
- **الاستجابة**: JSON مع خط الطول والعرض

## 🔒 الأمان والخصوصية

### حماية مفتاح API
- يتم حفظ مفتاح API في التخزين المحلي للمتصفح فقط
- لا يتم إرسال المفتاح إلى أي خادم خارجي عدا OpenWeatherMap
- يمكن حذف المفتاح في أي وقت من إعدادات المتصفح

### CORS والأمان
- تم تفعيل CORS للسماح بالطلبات من الواجهة الأمامية
- جميع الطلبات محمية ضد هجمات XSS
- التحقق من صحة البيانات المدخلة

## 🐛 استكشاف الأخطاء

### مشاكل شائعة وحلولها

#### "API key is required"
- تأكد من إدخال مفتاح API صحيح
- تحقق من أن المفتاح نشط في حساب OpenWeatherMap

#### "Failed to fetch weather data"
- تحقق من اتصال الإنترنت
- تأكد من أن مفتاح API صالح وغير منتهي الصلاحية
- تحقق من حدود الاستخدام في حساب OpenWeatherMap

#### الخريطة لا تظهر
- تأكد من تحميل مكتبة Leaflet.js بشكل صحيح
- تحقق من وجود أخطاء JavaScript في وحدة تحكم المتصفح
- تأكد من اتصال الإنترنت لتحميل طبقات الخريطة

#### طبقات الطقس لا تظهر
- تأكد من إدخال مفتاح API صحيح
- تحقق من أن خطة الاشتراك تدعم طبقات الخرائط
- جرب إعادة تحميل الصفحة

## 📞 الدعم والمساعدة

### الحصول على المساعدة
- افتح issue جديد في GitHub للإبلاغ عن الأخطاء
- راجع الوثائق الرسمية لـ OpenWeatherMap
- تحقق من منتديات المطورين للحلول

### المساهمة في المشروع
نرحب بجميع المساهمات! يمكنك:
- الإبلاغ عن الأخطاء
- اقتراح ميزات جديدة
- تحسين الكود الموجود
- ترجمة الواجهة لغات أخرى

## 📄 الترخيص

هذا المشروع مرخص تحت رخصة MIT. راجع ملف LICENSE للتفاصيل.

## 🙏 شكر وتقدير

- **OpenWeatherMap** لتوفير بيانات الطقس الموثوقة
- **Leaflet.js** لمكتبة الخرائط الممتازة
- **Font Awesome** للأيقونات الجميلة
- **Flask** لإطار العمل البسيط والقوي

---

**تم تطوير هذا المشروع بواسطة Manus AI لخدمة مجتمع محافظة السويداء وتوفير معلومات طقس دقيقة ومتقدمة.**

للمزيد من المعلومات أو الدعم، يرجى زيارة [صفحة المشروع على GitHub](https://github.com/your-username/al-suwayda-weather-system).

